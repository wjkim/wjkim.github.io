(async function(){"use strict";const u={"search.action.label":"검색","search.close.tooltip":"닫기","search.input.placeholder":"검색어를 입력해주세요","search.more.label":"전체 %d개 결과 보기"};function s(e){return window.siteI18n&&typeof window.siteI18n.translate=="function"?window.siteI18n.translate(e,u[e]):u[e]}function t(e,t={}){const n=document.createElement(e);return t.text&&(n.textContent=t.text),t.html&&(n.innerHTML=t.html),t.className&&(n.className=t.className),t.id&&(n.id=t.id),t.attrs&&Object.entries(t.attrs).forEach(([e,t])=>{n.setAttribute(e,t)}),t.dataset&&Object.entries(t.dataset).forEach(([e,t])=>{n.dataset[e]=t}),t.styles&&Object.entries(t.styles).forEach(([e,t])=>{n.style[e]=t}),n}const d=document.querySelector("#search-input"),l=document.querySelector(".menu-search"),c=document.querySelector(".mobile-search");let n,i,a,e;if(!d&&!c)return;l&&(l.addEventListener("click",o),l.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),o())})),c&&(c.addEventListener("click",o),c.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),o())})),document.addEventListener("keypress",f);function o(){e||m(),(!window.siteSearch||!window.siteSearch.index)&&(n.required=!0,window.siteSearch.initIndex().then(()=>n.required=!1)),a.classList.add("active"),e.classList.add("active"),n.focus()}function r(){if(!e)return;a.classList.remove("active"),e.classList.remove("active"),n.value="",h()}function m(){a=t("div",{className:"search-overlay"}),a.addEventListener("click",r),e=t("div",{className:"search-modal"});const o=t("div",{className:"search-modal-header"}),u=t("h3",{className:"search-modal-title",text:s("search.action.label"),dataset:{i18nId:"search.action.label",i18nText:""}});o.appendChild(u);const l=t("button",{className:"search-modal-close",html:'<i class="fa-solid fa-xmark"></i>',attrs:{"aria-label":s("search.close.tooltip")},dataset:{i18nId:"search.close.tooltip",i18nAttrs:"aria-label"}});l.addEventListener("click",r),o.appendChild(l),e.appendChild(o);const c=t("div",{className:"search-modal-input-container"}),h=s("search.input.placeholder");n=t("input",{className:"search-modal-input",id:"search-modal-input",attrs:{type:"text",maxLength:64,placeholder:h},dataset:{i18nId:"search.input.placeholder",i18nAttrs:"placeholder"}}),n.addEventListener("keyup",g),n.addEventListener("keydown",e=>{e.key==="Escape"?r():e.key==="Enter"&&(window.location.href="/search/?query="+encodeURIComponent(n.value.trim()))}),c.appendChild(n);const d=t("button",{className:"search-modal-button",html:'<i class="fa-solid fa-magnifying-glass"></i>',attrs:{"aria-label":s("search.action.label")},dataset:{i18nId:"search.action.label",i18nAttrs:"aria-label"}});d.addEventListener("click",()=>{window.location.href="/search/?query="+encodeURIComponent(n.value.trim())}),c.appendChild(d),e.appendChild(c),i=t("ul",{className:"search-modal-results"}),e.appendChild(i);const m=t("div",{className:"search-modal-footer",styles:{display:"none"}});e.appendChild(m),document.body.appendChild(a),document.body.appendChild(e),document.addEventListener("keydown",t=>{t.key==="Escape"&&e.classList.contains("active")&&r()})}function f(t){if(t.target.value!==0[0])return;if(e&&e.classList.contains("active"))return;const n=String.fromCharCode(t.charCode);if(!p(n))return;o(),t.preventDefault()}function p(e){if(d){const t=d.getAttribute("data-hotkeys")||"";return t.indexOf(e)>=0}return!1}function h(){if(i&&i.replaceChildren(),e){const t=e.querySelector(".search-modal-footer");t&&(t.style.display="none")}}function g(){if(h(),!n||!n.value)return;if(!window.siteSearch||!window.siteSearch.index)return;const o=window.siteSearch.index.search(n.value),c=Math.min(o.length,10),l=o.slice(0,c),r=document.createDocumentFragment();l.forEach(e=>{const s=t("li",{className:"search-result-item"}),n=t("a",{attrs:{href:e.item.href}}),o=t("div",{className:"search-result-title",text:e.item.title});if(n.appendChild(o),e.item.content){const s=e.item.content.length>150?e.item.content.substring(0,150)+"...":e.item.content,o=t("div",{className:"search-result-content",text:s});n.appendChild(o)}s.appendChild(n),r.appendChild(s)}),i.appendChild(r);const a=e.querySelector(".search-modal-footer");if(o.length>=5){a.style.display="block",a.innerHTML="";const e=t("div",{className:"search-more"}),i=s("search.more.label"),r=t("a",{text:i.replace("%d",o.length),attrs:{href:`/search/?query=${encodeURIComponent(n.value)}`},dataset:{i18nId:"search.more.label",i18nText:`{"%d": ${o.length}}`}});e.appendChild(r),a.appendChild(e)}else a.style.display="none"}})()