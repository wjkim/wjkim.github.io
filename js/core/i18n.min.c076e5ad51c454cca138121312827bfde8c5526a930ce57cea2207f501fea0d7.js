window.addEventListener("DOMContentLoaded",function(){function t(e){const t=window.siteI18n.data[e];if(!t)return;document.querySelectorAll("[data-i18n-id]").forEach(e=>{const i=e.dataset,a=t[i.i18nId];if(!a)return;"i18nText"in i&&n(e,a),"i18nAttrs"in i&&s(e,a),"i18nDatetime"in i&&o(e,a)})}function n(e,t){const n=e.dataset.i18nText;if(n!=="")try{const s=JSON.parse(n||"{}");Object.keys(s).forEach(n=>{let o=s[n];typeof o=="string"&&o.startsWith("$")&&(o=e.querySelector(o.slice(1)).outerHTML),t=t.replace(n,o)}),e.innerHTML=t}catch(e){console.error(e)}else e.textContent=t}function s(e,t){e.dataset.i18nAttrs.split(",").forEach(n=>{e.setAttribute(n,t)})}function o(e,t){const n=new Date(e.getAttribute("datetime"));e.textContent=i(t,n)}function i(e,t=new Date){const n=e=>String(e).padStart(2,"0"),h=t.getFullYear(),g=String(h).slice(-2),m=t.getMonth()+1,p=t.getDate(),s=t.getHours(),c=(s+11)%12+1,l=t.getMinutes(),d=t.getSeconds(),u=s>=12?"PM":"AM",O=(()=>{try{const n=new Intl.DateTimeFormat("en-US",{timeZoneName:"short"}).formatToParts(t),e=n.find(e=>e.type==="timeZoneName");return e?e.value:""}catch{return""}})(),i=-t.getTimezoneOffset(),a=i>=0?"+":"-",r=Math.floor((i<0?-i:i)/60),f=(i<0?-i:i)%60,v=`${a}${n(r)}${n(f)}`,b=`${a}${n(r)}:${n(f)}`,j=new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(t),y=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t),_=new Intl.DateTimeFormat("en-US",{month:"short"}).format(t),w=new Intl.DateTimeFormat("en-US",{month:"long"}).format(t),o={2006:String(h),"06":g,January:w,Jan:_,"01":n(m),1:String(m),"02":n(p),2:String(p),15:String(s),"03":n(c),3:String(c),"04":n(l),4:String(l),"05":n(d),5:String(d),PM:u,pm:u.toLowerCase(),MST:O,"-0700":v,"-07:00":b,Mon:j,Monday:y},x=Object.keys(o).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),C=new RegExp(x.join("|"),"g");return String(e).replace(C,e=>o[e]!==0[0]?o[e]:e)}const e=document.getElementById("i18n-selector"),a="site-language";window.siteI18n.initData().then(()=>{const n=window.siteI18n.getLanguage(window.siteI18n.data);t(n),e&&(e.value=n,e.addEventListener("change",e=>{localStorage.setItem(a,e.target.value),t(e.target.value)}))}).catch(()=>{e&&(e.value=window.siteI18n.defaultLang)})})